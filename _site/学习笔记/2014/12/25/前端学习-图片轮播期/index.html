<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      前端学习 图片轮播期 &middot; tiger
    
  </title>

  <!-- CSS -->
  <!-- <link rel="stylesheet" href="/public/css/syntax.css"> -->
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="/public/css/pygments.css">
  <link rel="stylesheet" href="/public/css/font-awesome.min.css">
  <!-- <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400"> -->

  <!-- Icons -->
  <!-- <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/img/apple-touch-icon-144-precomposed.png"> -->
  <link rel="shortcut icon" href="/public/img/tiger.jpg">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- livereload test -->
  <!--<script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>-->

  <!-- audioplayer -->
  <script src="/public/js/jquery-1.11.1.js"></script>
  <!-- <script src="/public/js/audioplayer/amazingaudioplayer.js"></script> -->
  <!-- <link rel="stylesheet" type="text/css" href="/public/css/audioplayer/initaudioplayer-1.css"> -->



</head>


  <body class="">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="sidebar-logo">
      <a href="/"><img src="/public/img/tiger.jpg"></a>
    </div>
    <p>enjoy life</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/"><i class="fa fa-home fa-fw"></i>&nbsp 主页·&nbspHome</a>
    <a class="sidebar-nav-item" href="/archive/"><i class="fa fa-file-text-o fa-fw"></i>&nbsp 归档·&nbspArchive</a>
    <a class="sidebar-nav-item" href="/category/"><i class="fa fa-book fa-fw"></i>&nbsp 分类·&nbspCategory</a>
    <a class="sidebar-nav-item" href="/tag/"><i class="fa fa-tags fa-fw"></i>&nbsp 标签·&nbspTag</a>
    <a class="sidebar-nav-item" href="/works/">works</a>
    <a class="sidebar-nav-item" href="/about/"><i class="fa fa-hand-o-right fa-fw"></i>&nbsp 关于·&nbspAbout</a>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2015. All rights reserved.
    </p>
  </div>
</div>



    

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    

      <div class="container content">
      <a href="/">
        <svg id="mustache" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                 viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
                  <g transform="translate(0,-952.36217)" opacity="0.95">
                    <path id="path2987" fill="#010101" d="M28.2,971.4c-10,0.5-19.1,13.3-28.2,2.1c0,15.1,23.7,30.5,39.8,16.3
                    c16,14.1,39.8-1.3,39.8-16.3c-12.5,15.4-25-14.4-39.8,4.5C35.8,972.7,31.9,971.2,28.2,971.4z"/>
                  </g>
        </svg>
      </a>
<h2 class="post-name"></h2>
<div class="post">
  <div class="post-heading inside">
    <img src="/public/img/SooHu.jpg">
    <h1 class="post-title">
      <a class="post-title-blog" href="">
        前端学习 图片轮播期
      </a>
    </h1>
      <p class="post-info">
        
          转载SooHu
        
      </p>
      <span class="post-info"><i class="fa fa-calendar"></i>&nbsp2014/12/25  </span>
      <span class="post-info"><i class="fa fa-book"></i>&nbsp<a href="/category/index.html#学习笔记">学习笔记</a></span>
      <span class="post-info"><i class="fa fa-tags"></i>&nbsp<a href="/tag/index.html#js">js</a></span> 
      <span class="post-info">&nbsp<a href="/tag/index.html#css">css</a></span>
      <span class="post-info">&nbsp<a href="/tag/index.html#"></a></span>
  </div>
  <div class="post-content">
    <p>需要实现的功能列表：</p>

<ul>
<li>左右按钮切换</li>
<li>图片无限滚动</li>
<li>小按钮切换</li>
<li>动画函数</li>
<li>自动播放</li>
</ul>


<p>html和css代码如下：</p>

<p><figure class="highlight"><pre><code class="language-html" data-lang="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;焦点轮播图&lt;/title&gt;
    &lt;style type=&quot;text/css&quot;&gt;
        *{ margin: 0; padding: 0; text-decoration: none;}
        body { padding: 20px;}
        #container { width: 600px; height: 400px; border: 3px solid #333; overflow: hidden; position: relative;}
        #list { width: 4200px; height: 400px; position: absolute; z-index: 1;}
        #list img { float: left;}
        #buttons { position: absolute; height: 10px; width: 100px; z-index: 2; bottom: 20px; left: 250px;}
        #buttons span { cursor: pointer; float: left; border: 1px solid #fff; width: 10px; height: 10px; border-radius: 50%; background: #333; margin-right: 5px;}
        #buttons .on {  background: orangered;}
        .arrow { cursor: pointer; display: none; line-height: 39px; text-align: center; font-size: 36px; font-weight: bold; width: 40px; height: 40px;  position: absolute; z-index: 2; top: 180px; background-color: RGBA(0,0,0,.3); color: #fff;}
        .arrow:hover { background-color: RGBA(0,0,0,.7);}
        #container:hover .arrow { display: block;}
        #prev { left: 20px;}
        #next { right: 20px;}
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;</p>

<p>&lt;div id=&quot;container&quot;&gt;
    &lt;div id=&quot;list&quot; style=&quot;left: -600px;&quot;&gt;
        &lt;img src=&quot;img/5.jpg&quot; alt=&quot;1&quot;/&gt;
        &lt;img src=&quot;img/1.jpg&quot; alt=&quot;1&quot;/&gt;
        &lt;img src=&quot;img/2.jpg&quot; alt=&quot;2&quot;/&gt;
        &lt;img src=&quot;img/3.jpg&quot; alt=&quot;3&quot;/&gt;
        &lt;img src=&quot;img/4.jpg&quot; alt=&quot;4&quot;/&gt;
        &lt;img src=&quot;img/5.jpg&quot; alt=&quot;5&quot;/&gt;
        &lt;img src=&quot;img/1.jpg&quot; alt=&quot;5&quot;/&gt;
    &lt;/div&gt;
    &lt;div id=&quot;buttons&quot;&gt;
        &lt;span index=&quot;1&quot; class=&quot;on&quot;&gt;&lt;/span&gt;
        &lt;span index=&quot;2&quot;&gt;&lt;/span&gt;
        &lt;span index=&quot;3&quot;&gt;&lt;/span&gt;
        &lt;span index=&quot;4&quot;&gt;&lt;/span&gt;
        &lt;span index=&quot;5&quot;&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;a href=&quot;javascript:;&quot; id=&quot;prev&quot; class=&quot;arrow&quot;&gt;&amp;lt;&lt;/a&gt;
    &lt;a href=&quot;javascript:;&quot; id=&quot;next&quot; class=&quot;arrow&quot;&gt;&amp;gt;&lt;/a&gt;
&lt;/div&gt;</p>

<p>&lt;/body&gt;
&lt;/html&gt;</code></pre></figure></p>

<!-- more -->


<p>下面依次按照功能列表完成Js代码</p>

<h3>左右按钮切换功能</h3>

<p><figure class="highlight"><pre><code class="language-js" data-lang="js">window.onload = function() {
    // 先获取元素
    var container = document.getElementById(&#39;container&#39;);
    var list = document.getElementById(&#39;list&#39;);
    var buttons = document.getElementById(&#39;buttons&#39;).getElementsByTagName(&#39;span&#39;);
    var prev = document.getElementById(&#39;prev&#39;);
    var next = document.getElementById(&#39;next&#39;);</p>

<pre><code>// 添加事件
prev.onclick = function() {
    animate(600);
}
next.onclick = function() {
    animate(-600);
}
function animate(offset) {
    list.style.left = parseInt(list.style.left) + offset + &amp;#39;px&amp;#39;;
}
</code></pre>

<p>}</code></pre></figure></p>

<p>这样就是实现了左右按钮动画切换效果，但是当切换到最左边或者最右边的时候，就会出现空白，所以还需要实现无限滚动效果。</p>

<h3>无限滚动</h3>

<p><figure class="highlight"><pre><code class="language-js" data-lang="js">window.onload = function() {
    // 先获取元素
    var container = document.getElementById(&#39;container&#39;);
    var list = document.getElementById(&#39;list&#39;);
    var buttons = document.getElementById(&#39;buttons&#39;).getElementsByTagName(&#39;span&#39;);
    var prev = document.getElementById(&#39;prev&#39;);
    var next = document.getElementById(&#39;next&#39;);</p>

<pre><code>// 添加事件
prev.onclick = function() {
    animate(600);
}
next.onclick = function() {
    animate(-600);
}
function animate(offset) {
    var newLeft = parseInt(list.style.left) + offset;
    list.style.left = newLeft + &amp;#39;px&amp;#39;;
    // 判断边界
    if (newLeft &amp;gt; -600) {
        newLeft = -3000 + &amp;#39;px&amp;#39;;
    }
    if (newLeft &amp;lt; -3000) {
        newLeft = -600 + &amp;#39;px&amp;#39;;
    }
}
</code></pre>

<p>}</code></pre></figure></p>

<h3>按钮跟随图片一起变化</h3>

<p><figure class="highlight"><pre><code class="language-js" data-lang="js">window.onload = function() {
    // 先获取元素
    var container = document.getElementById(&#39;container&#39;);
    var list = document.getElementById(&#39;list&#39;);
    var buttons = document.getElementById(&#39;buttons&#39;).getElementsByTagName(&#39;span&#39;);
    var prev = document.getElementById(&#39;prev&#39;);
    var next = document.getElementById(&#39;next&#39;);</p>

<pre><code>var index = 1;

// 添加事件
prev.onclick = function() {
    if (index == 1) {//index不能小于1或者大于5
        index = 5;
    }
    else {
        index -= 1;         
    }
    showButton();
    animate(600);
}
next.onclick = function() {
    if (index == 5) {
        index = 1;
    }
    else {
        index += 1;         
    }
    showButton();
    animate(-600);

}
function animate(offset) {
    var newLeft = parseInt(list.style.left) + offset;
    list.style.left = newLeft + &amp;#39;px&amp;#39;;
    if (newLeft &amp;gt; -600) {
        newLeft = -3000 + &amp;#39;px&amp;#39;;
    }
    if (newLeft &amp;lt; -3000) {
        newLeft = -600 + &amp;#39;px&amp;#39;;
    }
}
// 小按钮显示效果
function showButton() {
    for (var i = 0; i &amp;lt; buttons.length; i++) {
        if (buttons[i].className == &amp;#39;on&amp;#39;) {
            buttons[i].className =&amp;#39;&amp;#39;;
            break;
        }       
    }
    button[index - 1].className = &amp;#39;on&amp;#39;;
}
</code></pre>

<p>}</code></pre></figure></p>

<h3>小按钮切换</h3>

<p><figure class="highlight"><pre><code class="language-js" data-lang="js">window.onload = function() {
    // 先获取元素
    var container = document.getElementById(&#39;container&#39;);
    var list = document.getElementById(&#39;list&#39;);
    var buttons = document.getElementById(&#39;buttons&#39;).getElementsByTagName(&#39;span&#39;);
    var prev = document.getElementById(&#39;prev&#39;);
    var next = document.getElementById(&#39;next&#39;);</p>

<pre><code>var index = 1;

// 添加事件
prev.onclick = function() {
    if (index == 1) {//index不能小于1或者大于5
        index = 5;
    }
    else {
        index -= 1;         
    }
    showButton();
    animate(600);
}
next.onclick = function() {
    if (index == 5) {
        index = 1;
    }
    else {
        index += 1;         
    }
    showButton();
    animate(-600);

}

// 小按钮切换
for(var i = 0; i &amp;lt; buttons.length; i++) {
    buttons[i].onclick = function(){
        if (this.className == &amp;#39;on&amp;#39;) {
            return;
        }//如果当前按钮时不进行操作
        var myIndex = parseInt(this.getAttribute(&amp;#39;index&amp;#39;));
        var offset = -600 * (myIndex - index);
        animate(offset); 
        index = myIndex;
        showButton();
    }
}

function animate(offset) {
    var newLeft = parseInt(list.style.left) + offset;
    list.style.left = newLeft + &amp;#39;px&amp;#39;;
    if (newLeft &amp;gt; -600) {
        newLeft = -3000 + &amp;#39;px&amp;#39;;
    }
    if (newLeft &amp;lt; -3000) {
        newLeft = -600 + &amp;#39;px&amp;#39;;
    }
}
// 小按钮显示效果
function showButton() {
    for (var i = 0; i &amp;lt; buttons.length; i++) {
        if (buttons[i].className == &amp;#39;on&amp;#39;) {
            buttons[i].className =&amp;#39;&amp;#39;;
            break;
        }       
    }
    button[index - 1].className = &amp;#39;on&amp;#39;;
}
</code></pre>

<p>}</code></pre></figure></p>

<h3>动画函数</h3>

<p><figure class="highlight"><pre><code class="language-js" data-lang="js">window.onload = function() {
    // 先获取元素
    var container = document.getElementById(&#39;container&#39;);
    var list = document.getElementById(&#39;list&#39;);
    var buttons = document.getElementById(&#39;buttons&#39;).getElementsByTagName(&#39;span&#39;);
    var prev = document.getElementById(&#39;prev&#39;);
    var next = document.getElementById(&#39;next&#39;);
    var animate = false;</p>

<pre><code>var index = 1;

// 添加事件
prev.onclick = function() {
    if (index == 1) {//index不能小于1或者大于5
        index = 5;
    }
    else {
        index -= 1;         
    }
    showButton();
    // animate为falsel时才执行动画
    if(!animate){
        animate(600);
    }

}
next.onclick = function() {
    if (index == 5) {
        index = 1;
    }
    else {
        index += 1;         
    }
    showButton();
    if(!animate){
        animate(-600);
    }
}

// 小按钮切换
for(var i = 0; i &amp;lt; buttons.length; i++) {
    buttons[i].onclick = function(){
        if (this.className == &amp;#39;on&amp;#39;) {
            return;
        }//如果当前按钮时不进行操作
        var myIndex = parseInt(this.getAttribute(&amp;#39;index&amp;#39;));
        var offset = -600 * (myIndex - index);
        if(!animate){
            animate(offset);                
        }
        index = myIndex;
        showButton();
    }
}

function animate(offset) {
    animated = true;
    var time = 300;//动画时间
    var inteval = 10;//每次位移时间
    var speed = offset/(time/inteval);//每次位移距离
    var left = parseInt(list.style.left) + offset;

    var go = function (){
        if ( (speed &amp;gt; 0 &amp;amp;&amp;amp; parseInt(list.style.left) &amp;lt; left) || (speed &amp;lt; 0 &amp;amp;&amp;amp; parseInt(list.style.left) &amp;gt; left)) {
            list.style.left = parseInt(list.style.left) + speed + &amp;#39;px&amp;#39;;
            setTimeout(go, inteval);
        }
        else {
            list.style.left = left + &amp;#39;px&amp;#39;;
            if(left&amp;gt;-200){
                list.style.left = -600 * len + &amp;#39;px&amp;#39;;
            }
            if(left&amp;lt;(-600 * len)) {
                list.style.left = &amp;#39;-600px&amp;#39;;
            }
            animated = false;
        }
    }
    go();
}
// 小按钮显示效果
function showButton() {
    for (var i = 0; i &amp;lt; buttons.length; i++) {
        if (buttons[i].className == &amp;#39;on&amp;#39;) {
            buttons[i].className =&amp;#39;&amp;#39;;
            break;
        }       
    }
    button[index - 1].className = &amp;#39;on&amp;#39;;
}
</code></pre>

<p>}</code></pre></figure></p>

<h3>自动播放</h3>

<p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">window.onload = function () {
    var container = document.getElementById(&#39;container&#39;);
    var list = document.getElementById(&#39;list&#39;);
    var buttons = document.getElementById(&#39;buttons&#39;).getElementsByTagName(&#39;span&#39;);
    var prev = document.getElementById(&#39;prev&#39;);
    var next = document.getElementById(&#39;next&#39;);
    var index = 1;
    var len = 5;
    var animated = false;
    var interval = 3000;
    var timer;</p>

<pre><code>function animate (offset) {  
    if (offset == 0) {
        return;
    }
    animated = true;
    var time = 300;
    var inteval = 10;
    var speed = offset/(time/inteval);
    var left = parseInt(list.style.left) + offset;

    var go = function (){
        if ( (speed &amp;gt; 0 &amp;amp;&amp;amp; parseInt(list.style.left) &amp;lt; left) || (speed &amp;lt; 0 &amp;amp;&amp;amp; parseInt(list.style.left) &amp;gt; left)) {
            list.style.left = parseInt(list.style.left) + speed + &amp;#39;px&amp;#39;;
            setTimeout(go, inteval);
        }
        else {
            list.style.left = left + &amp;#39;px&amp;#39;;
            if(left&amp;gt;-200){
                list.style.left = -600 * len + &amp;#39;px&amp;#39;;
            }
            if(left&amp;lt;(-600 * len)) {
                list.style.left = &amp;#39;-600px&amp;#39;;
            }
            animated = false;
        }
    }
    go();
}

function showButton() {
    for (var i = 0; i &amp;lt; buttons.length ; i++) {
        if( buttons[i].className == &amp;#39;on&amp;#39;){
            buttons[i].className = &amp;#39;&amp;#39;;
            break;
        }
    }
    buttons[index - 1].className = &amp;#39;on&amp;#39;;
}

function play() {
    timer = setTimeout(function () {
        next.onclick();
        play();
    }, interval);
}
function stop() {
    clearTimeout(timer);
}

next.onclick = function () {
    if (animated) {
        return;
    }
    if (index == 5) {
        index = 1;
    }
    else {
        index += 1;
    }
    animate(-600);
    showButton();
}
prev.onclick = function () {
    if (animated) {
        return;
    }
    if (index == 1) {
        index = 5;
    }
    else {
        index -= 1;
    }
    animate(600);
    showButton();
}

for (var i = 0; i &amp;lt; buttons.length; i++) {
    buttons[i].onclick = function () {
        if (animated) {
            return;
        }
        if(this.className == &amp;#39;on&amp;#39;) {
            return;
        }
        var myIndex = parseInt(this.getAttribute(&amp;#39;index&amp;#39;));
        var offset = -600 * (myIndex - index);

        animate(offset);
        index = myIndex;
        showButton();
    }
}

container.onmouseover = stop;
container.onmouseout = play;

play();
</code></pre>

<p>}</code></pre></figure></p>
    
  </div>
</div>

<!-- <div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/init/2015/11/04/init/">
            Init
            <small>04 Nov 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/ios/2015/05/13/ios%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%88%A9%E7%94%A8delegate%E5%AE%9E%E7%8E%B0%E4%B8%A4%E4%B8%AA%E9%A1%B5%E9%9D%A2%E9%97%B4%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93/">
            Ios学习笔记——利用delegate实现两个页面间的数据传输
            <small>13 May 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/ios/2015/05/08/ios%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E8%AE%BE%E7%BD%AE%E5%AF%BC%E8%88%AA%E6%A0%8F%E5%85%A8%E9%80%8F%E6%98%8E%E6%95%88%E6%9E%9C/">
            Ios学习笔记——设置导航栏全透明效果
            <small>08 May 2015</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div> -->


<div class="sub_pagination">
  
  
    <a class="sub_pagination-item newer" href="/%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86/2015/01/04/omnifocus2%E4%BD%BF%E7%94%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1/">上一篇&nbsp<i class="fa fa-chain"></i></a>
  
  
    <a class="sub_pagination-item newer" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/2014/12/19/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-css3%E5%8A%A8%E7%94%BB/">学习笔记——css3动画&nbsp<i class="fa fa-share"></i></a>
  
</div>


<!-- <div class="comments"> -->
<h2>Comments</h2>



<!-- Duoshuo Comment BEGIN -->  
<div id="comment">
    <div class="ds-thread" data-title="前端学习 图片轮播期"></div>
    <script type="text/javascript">
        var duoshuoQuery = {short_name:"tiger"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = '../../../../../public/js/duoshuo.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0]
                    || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
</div>


<!-- Duoshuo Comment END -->
      </div>
    </div>
    
    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
    <div class="footer">
  <p>  Copyright © 2015 - <a href="/">tiger</a> - Powered by 
    <a href="http://jekyllrb.com/">Jekyll</a>.
    <a href="http://github.com/">Github</a>
  </p>
  <ul>
    <li><a href="https://github.com/xinghuwang"><i class="fa fa-github fa-2x"></i></a></li>
  </ul>
</div>


    <!-- "The ending isn’t any more important than the moments leading to it." -Dr. Eva Rosalene, To The Moon -->
  </body>
</html>

